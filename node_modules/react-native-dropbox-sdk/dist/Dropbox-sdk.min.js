!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r(require("es6-promise"),require("node-fetch")):"function"==typeof define&&define.amd?define(["es6-promise","node-fetch"],r):"object"==typeof exports?exports.Dropbox=r(require("es6-promise"),require("node-fetch")):e.Dropbox=r(e["es6-promise"],e["node-fetch"])}(this,function(e,r){return function(e){function r(s){if(t[s])return t[s].exports;var i=t[s]={exports:{},id:s,loaded:!1};return e[s].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}var t={};return r.m=e,r.c=t,r.p="",r(0)}([function(e,r,t){var s=t(7);e.exports=s},function(e,r,t){(function(r){function s(){if(o){if("function"==typeof o.rnFetch)return o.rnFetch;if("function"==typeof o.fetch)return o.fetch}return n}function i(){var e=Array.prototype.slice.call(arguments);return u.fetch.apply(null,e)}var n=t(13),o=void 0!==typeof r?r:window,u={fetch:s()};i.harness=u,e.exports=i}).call(r,function(){return this}())},function(e,r){function t(e){return"https://"+e+".dropboxapi.com/2/"}e.exports=t},function(r,t){r.exports=e},function(e,r){function t(e){return JSON.stringify(e).replace(s,function(e){return"\\u"+("000"+e.charCodeAt(0).toString(16)).slice(-4)})}var s=/[\u007f-\uffff]/g;e.exports=t},function(e,r,t){var s,i=t(9);t(8),s=function(e){e=e||{},this.accessToken=e.accessToken,this.clientId=e.clientId,this.selectUser=e.selectUser,this.proxy=e.proxy},s.prototype.setAccessToken=function(e){this.accessToken=e},s.prototype.getAccessToken=function(){return this.accessToken},s.prototype.setClientId=function(e){this.clientId=e},s.prototype.getClientId=function(){return this.clientId},s.prototype.setProxy=function(e){this.proxy=e},s.prototype.getProxy=function(){return this.proxy},s.prototype.getAuthenticationUrl=function(e,r){var t,s="https://www.dropbox.com/oauth2/authorize",i=this.getClientId();if(!i)throw new Error("A client id is required. You can set the client id using .setClientId().");if(!e)throw new Error("A redirect uri is required.");return t=s+"?response_type=token&client_id="+i,e&&(t=t+"&redirect_uri="+e),r&&(t=t+"&state="+r),t},s.prototype.authenticateWithCordova=function(e,r){var t="https://www.dropbox.com/1/oauth2/redirect_receiver",s=this.getAuthenticationUrl(t),i=window.open(s,"_blank"),n=!1,o=function(e){window.setTimeout(function(){i.close()},10),r()},u=function(t){var s="&error=",n=t.url.indexOf(s);if(n>-1)window.setTimeout(function(){i.close()},10),r();else{var o="#access_token=",u=t.url.indexOf(o),a=t.url.indexOf("&token_type=");if(u>-1){u+=o.length,window.setTimeout(function(){i.close()},10);var c=t.url.substring(u,a);e(c)}}},a=function(e){n||(i.removeEventListener("loaderror",o),i.removeEventListener("loadstop",u),i.removeEventListener("exit",a),n=!0)};i.addEventListener("loaderror",o),i.addEventListener("loadstop",u),i.addEventListener("exit",a)},s.prototype.request=function(e,r,t,s,n){var o=null;switch(n){case i.RPC:o=this.getRpcRequest();break;case i.DOWNLOAD:o=this.getDownloadRequest();break;case i.UPLOAD:o=this.getUploadRequest();break;default:throw new Error("Invalid request style: "+n)}return o(e,r,t,s,this.getAccessToken(),this.selectUser,this.proxy)},s.prototype.setRpcRequest=function(e){s.prototype.rpcRequest=e},s.prototype.getRpcRequest=function(){return void 0===s.prototype.rpcRequest&&(s.prototype.rpcRequest=t(11)),s.prototype.rpcRequest},s.prototype.setDownloadRequest=function(e){s.prototype.downloadRequest=e},s.prototype.getDownloadRequest=function(){return void 0===s.prototype.downloadRequest&&(s.prototype.downloadRequest=t(6)),s.prototype.downloadRequest},s.prototype.setUploadRequest=function(e){s.prototype.uploadRequest=e},s.prototype.getUploadRequest=function(){return void 0===s.prototype.uploadRequest&&(s.prototype.uploadRequest=t(12)),s.prototype.uploadRequest},e.exports=s},function(e,r,t){var s,i,n=t(3).Promise,o=t(2),u=t(4),a=t(1);s=function(e){return{status:e.status,error:e.toString()}},i=function(e,r,t,i,c,p){if("user"!==t)throw new Error("Unexpected auth type: "+t);var f=function(t,f){var l={method:"POST",headers:{Authorization:"Bearer "+c,"Dropbox-API-Arg":u(r)}};p&&(l.headers["Dropbox-API-Select-User"]=p),a(o(i)+e,l).then(function(e){var r;if(!e.ok)throw r=new Error("Request failed"),r.status=e.status,r;return e}).then(function(e){return n.all([e.buffer&&e.buffer()||e.blob(),n.resolve(e.headers)])}).then(function(e){var r=e[0],s=e[1],i=JSON.parse(s.get("dropbox-api-result"));i.fileBinary=r,t(i)}).catch(function(e){f(s(e))})};return new n(f)},e.exports=i},function(e,r,t){var s,i=t(5),n=t(10);s=function(e){i.call(this,e)},s.prototype=Object.create(i.prototype),s.prototype.constructor=s,s.prototype=Object.assign(s.prototype,n),s.prototype.filesGetSharedLinkFile=function(e){return this.request("sharing/get_shared_link_file",e,"api","download")},e.exports=s},function(e,r){"function"!=typeof Object.assign&&!function(){Object.assign=function(e){"use strict";var r,t,s,i;if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(r=Object(e),t=1;t<arguments.length;t++)if(s=arguments[t],void 0!==s&&null!==s)for(i in s)s.hasOwnProperty(i)&&(r[i]=s[i]);return r}}()},function(e,r){var t={RPC:"rpc",DOWNLOAD:"download",UPLOAD:"upload"};e.exports=t},function(e,r){var t={};t.authTokenFromOauth1=function(e){return this.request("auth/token/from_oauth1",e,"app","api","rpc")},t.authTokenRevoke=function(e){return this.request("auth/token/revoke",e,"user","api","rpc")},t.filesAlphaGetMetadata=function(e){return this.request("files/alpha/get_metadata",e,"user","api","rpc")},t.filesAlphaUpload=function(e){return this.request("files/alpha/upload",e,"user","content","upload")},t.filesCopy=function(e){return this.request("files/copy",e,"user","api","rpc")},t.filesCopyBatch=function(e){return this.request("files/copy_batch",e,"user","api","rpc")},t.filesCopyBatchCheck=function(e){return this.request("files/copy_batch/check",e,"user","api","rpc")},t.filesCopyReferenceGet=function(e){return this.request("files/copy_reference/get",e,"user","api","rpc")},t.filesCopyReferenceSave=function(e){return this.request("files/copy_reference/save",e,"user","api","rpc")},t.filesCopyV2=function(e){return this.request("files/copy_v2",e,"user","api","rpc")},t.filesCreateFolder=function(e){return this.request("files/create_folder",e,"user","api","rpc")},t.filesCreateFolderV2=function(e){return this.request("files/create_folder_v2",e,"user","api","rpc")},t.filesDelete=function(e){return this.request("files/delete",e,"user","api","rpc")},t.filesDeleteBatch=function(e){return this.request("files/delete_batch",e,"user","api","rpc")},t.filesDeleteBatchCheck=function(e){return this.request("files/delete_batch/check",e,"user","api","rpc")},t.filesDeleteV2=function(e){return this.request("files/delete_v2",e,"user","api","rpc")},t.filesDownload=function(e){return this.request("files/download",e,"user","content","download")},t.filesGetMetadata=function(e){return this.request("files/get_metadata",e,"user","api","rpc")},t.filesGetPreview=function(e){return this.request("files/get_preview",e,"user","content","download")},t.filesGetTemporaryLink=function(e){return this.request("files/get_temporary_link",e,"user","api","rpc")},t.filesGetThumbnail=function(e){return this.request("files/get_thumbnail",e,"user","content","download")},t.filesListFolder=function(e){return this.request("files/list_folder",e,"user","api","rpc")},t.filesListFolderContinue=function(e){return this.request("files/list_folder/continue",e,"user","api","rpc")},t.filesListFolderGetLatestCursor=function(e){return this.request("files/list_folder/get_latest_cursor",e,"user","api","rpc")},t.filesListFolderLongpoll=function(e){return this.request("files/list_folder/longpoll",e,"noauth","notify","rpc")},t.filesListRevisions=function(e){return this.request("files/list_revisions",e,"user","api","rpc")},t.filesMove=function(e){return this.request("files/move",e,"user","api","rpc")},t.filesMoveBatch=function(e){return this.request("files/move_batch",e,"user","api","rpc")},t.filesMoveBatchCheck=function(e){return this.request("files/move_batch/check",e,"user","api","rpc")},t.filesMoveV2=function(e){return this.request("files/move_v2",e,"user","api","rpc")},t.filesPermanentlyDelete=function(e){return this.request("files/permanently_delete",e,"user","api","rpc")},t.filesPropertiesAdd=function(e){return this.request("files/properties/add",e,"user","api","rpc")},t.filesPropertiesOverwrite=function(e){return this.request("files/properties/overwrite",e,"user","api","rpc")},t.filesPropertiesRemove=function(e){return this.request("files/properties/remove",e,"user","api","rpc")},t.filesPropertiesTemplateGet=function(e){return this.request("files/properties/template/get",e,"user","api","rpc")},t.filesPropertiesTemplateList=function(e){return this.request("files/properties/template/list",e,"user","api","rpc")},t.filesPropertiesUpdate=function(e){return this.request("files/properties/update",e,"user","api","rpc")},t.filesRestore=function(e){return this.request("files/restore",e,"user","api","rpc")},t.filesSaveUrl=function(e){return this.request("files/save_url",e,"user","api","rpc")},t.filesSaveUrlCheckJobStatus=function(e){return this.request("files/save_url/check_job_status",e,"user","api","rpc")},t.filesSearch=function(e){return this.request("files/search",e,"user","api","rpc")},t.filesUpload=function(e){return this.request("files/upload",e,"user","content","upload")},t.filesUploadSessionAppend=function(e){return this.request("files/upload_session/append",e,"user","content","upload")},t.filesUploadSessionAppendV2=function(e){return this.request("files/upload_session/append_v2",e,"user","content","upload")},t.filesUploadSessionFinish=function(e){return this.request("files/upload_session/finish",e,"user","content","upload")},t.filesUploadSessionFinishBatch=function(e){return this.request("files/upload_session/finish_batch",e,"user","api","rpc")},t.filesUploadSessionFinishBatchCheck=function(e){return this.request("files/upload_session/finish_batch/check",e,"user","api","rpc")},t.filesUploadSessionStart=function(e){return this.request("files/upload_session/start",e,"user","content","upload")},t.paperDocsArchive=function(e){return this.request("paper/docs/archive",e,"user","api","rpc")},t.paperDocsDownload=function(e){return this.request("paper/docs/download",e,"user","api","download")},t.paperDocsFolderUsersList=function(e){return this.request("paper/docs/folder_users/list",e,"user","api","rpc")},t.paperDocsFolderUsersListContinue=function(e){return this.request("paper/docs/folder_users/list/continue",e,"user","api","rpc")},t.paperDocsGetFolderInfo=function(e){return this.request("paper/docs/get_folder_info",e,"user","api","rpc")},t.paperDocsList=function(e){return this.request("paper/docs/list",e,"user","api","rpc")},t.paperDocsListContinue=function(e){return this.request("paper/docs/list/continue",e,"user","api","rpc")},t.paperDocsPermanentlyDelete=function(e){return this.request("paper/docs/permanently_delete",e,"user","api","rpc")},t.paperDocsSharingPolicyGet=function(e){return this.request("paper/docs/sharing_policy/get",e,"user","api","rpc")},t.paperDocsSharingPolicySet=function(e){return this.request("paper/docs/sharing_policy/set",e,"user","api","rpc")},t.paperDocsUsersAdd=function(e){return this.request("paper/docs/users/add",e,"user","api","rpc")},t.paperDocsUsersList=function(e){return this.request("paper/docs/users/list",e,"user","api","rpc")},t.paperDocsUsersListContinue=function(e){return this.request("paper/docs/users/list/continue",e,"user","api","rpc")},t.paperDocsUsersRemove=function(e){return this.request("paper/docs/users/remove",e,"user","api","rpc")},t.sharingAddFileMember=function(e){return this.request("sharing/add_file_member",e,"user","api","rpc")},t.sharingAddFolderMember=function(e){return this.request("sharing/add_folder_member",e,"user","api","rpc")},t.sharingChangeFileMemberAccess=function(e){return this.request("sharing/change_file_member_access",e,"user","api","rpc")},t.sharingCheckJobStatus=function(e){return this.request("sharing/check_job_status",e,"user","api","rpc")},t.sharingCheckRemoveMemberJobStatus=function(e){return this.request("sharing/check_remove_member_job_status",e,"user","api","rpc")},t.sharingCheckShareJobStatus=function(e){return this.request("sharing/check_share_job_status",e,"user","api","rpc")},t.sharingCreateSharedLink=function(e){return this.request("sharing/create_shared_link",e,"user","api","rpc")},t.sharingCreateSharedLinkWithSettings=function(e){return this.request("sharing/create_shared_link_with_settings",e,"user","api","rpc")},t.sharingGetFileMetadata=function(e){return this.request("sharing/get_file_metadata",e,"user","api","rpc")},t.sharingGetFileMetadataBatch=function(e){return this.request("sharing/get_file_metadata/batch",e,"user","api","rpc")},t.sharingGetFolderMetadata=function(e){return this.request("sharing/get_folder_metadata",e,"user","api","rpc")},t.sharingGetSharedLinkFile=function(e){return this.request("sharing/get_shared_link_file",e,"user","content","download")},t.sharingGetSharedLinkMetadata=function(e){return this.request("sharing/get_shared_link_metadata",e,"user","api","rpc")},t.sharingGetSharedLinks=function(e){return this.request("sharing/get_shared_links",e,"user","api","rpc")},t.sharingListFileMembers=function(e){return this.request("sharing/list_file_members",e,"user","api","rpc")},t.sharingListFileMembersBatch=function(e){return this.request("sharing/list_file_members/batch",e,"user","api","rpc")},t.sharingListFileMembersContinue=function(e){return this.request("sharing/list_file_members/continue",e,"user","api","rpc")},t.sharingListFolderMembers=function(e){return this.request("sharing/list_folder_members",e,"user","api","rpc")},t.sharingListFolderMembersContinue=function(e){return this.request("sharing/list_folder_members/continue",e,"user","api","rpc")},t.sharingListFolders=function(e){return this.request("sharing/list_folders",e,"user","api","rpc")},t.sharingListFoldersContinue=function(e){return this.request("sharing/list_folders/continue",e,"user","api","rpc")},t.sharingListMountableFolders=function(e){return this.request("sharing/list_mountable_folders",e,"user","api","rpc")},t.sharingListMountableFoldersContinue=function(e){return this.request("sharing/list_mountable_folders/continue",e,"user","api","rpc")},t.sharingListReceivedFiles=function(e){return this.request("sharing/list_received_files",e,"user","api","rpc")},t.sharingListReceivedFilesContinue=function(e){return this.request("sharing/list_received_files/continue",e,"user","api","rpc")},t.sharingListSharedLinks=function(e){return this.request("sharing/list_shared_links",e,"user","api","rpc")},t.sharingModifySharedLinkSettings=function(e){return this.request("sharing/modify_shared_link_settings",e,"user","api","rpc")},t.sharingMountFolder=function(e){return this.request("sharing/mount_folder",e,"user","api","rpc")},t.sharingRelinquishFileMembership=function(e){return this.request("sharing/relinquish_file_membership",e,"user","api","rpc")},t.sharingRelinquishFolderMembership=function(e){return this.request("sharing/relinquish_folder_membership",e,"user","api","rpc")},t.sharingRemoveFileMember=function(e){return this.request("sharing/remove_file_member",e,"user","api","rpc")},t.sharingRemoveFileMember2=function(e){return this.request("sharing/remove_file_member_2",e,"user","api","rpc")},t.sharingRemoveFolderMember=function(e){return this.request("sharing/remove_folder_member",e,"user","api","rpc")},t.sharingRevokeSharedLink=function(e){return this.request("sharing/revoke_shared_link",e,"user","api","rpc")},t.sharingShareFolder=function(e){return this.request("sharing/share_folder",e,"user","api","rpc")},t.sharingTransferFolder=function(e){return this.request("sharing/transfer_folder",e,"user","api","rpc")},t.sharingUnmountFolder=function(e){return this.request("sharing/unmount_folder",e,"user","api","rpc")},t.sharingUnshareFile=function(e){return this.request("sharing/unshare_file",e,"user","api","rpc")},t.sharingUnshareFolder=function(e){return this.request("sharing/unshare_folder",e,"user","api","rpc")},t.sharingUpdateFileMember=function(e){return this.request("sharing/update_file_member",e,"user","api","rpc")},t.sharingUpdateFolderMember=function(e){return this.request("sharing/update_folder_member",e,"user","api","rpc")},t.sharingUpdateFolderPolicy=function(e){return this.request("sharing/update_folder_policy",e,"user","api","rpc")},t.teamLogGetEvents=function(e){return this.request("team_log/get_events",e,"team","api","rpc")},t.teamLogGetEventsContinue=function(e){return this.request("team_log/get_events/continue",e,"team","api","rpc")},t.usersGetAccount=function(e){return this.request("users/get_account",e,"user","api","rpc")},t.usersGetAccountBatch=function(e){return this.request("users/get_account_batch",e,"user","api","rpc")},t.usersGetCurrentAccount=function(e){return this.request("users/get_current_account",e,"user","api","rpc")},t.usersGetSpaceUsage=function(e){return this.request("users/get_space_usage",e,"user","api","rpc")},e.exports=t},function(e,r,t){var s=t(3).Promise,i=t(2),n=t(1),o=function(e){return{status:e.status,error:e}},u=function(e,r,t,u,a,c){var p=function(s,p){r||(r=null);var f={method:"POST",headers:{"Content-Type":"application/json"},body:"string"!=typeof r?JSON.stringify(r):r};switch(t){case"team":case"user":f.headers.Authorization="Bearer "+a;break;case"noauth":break;default:throw new Error("Unhandled auth type: "+t)}c&&(f.headers["Dropbox-API-Select-User"]=c),n(i(u)+e,f).then(function(e){if(!e.ok){var r=new Error("Request failed");throw r.status=e.status,r}return e}).then(function(e){return e.json()}).then(function(e){s(e)}).catch(function(e){p(o(e))})};return new s(p)};e.exports=u},function(e,r,t){var s=t(3).Promise,i=t(2),n=t(1),o=t(4),u=function(e){return{status:e.status,error:e.toString()}},a=function(e,r,t,a,c,p){if("user"!==t)throw new Error("Unexpected auth type: "+t);var f=function(t,s){var f=r.contents;delete r.contents;var l={method:"POST",headers:{"Content-Type":"application/octet-stream",Authorization:"Bearer "+c,"Dropbox-API-Arg":o(r)},body:f};p&&(l.headers["Dropbox-API-Select-User"]=p),n(i(a)+e,l).then(function(e){return e.json()}).then(function(e){t(e.body)}).catch(function(e){s(u(e))})};return new s(f)};e.exports=a},function(e,t){e.exports=r}])});